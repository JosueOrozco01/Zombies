@startuml
' Full dependency / package diagram for Assets/Codigo
skinparam packageStyle rect

package "GameplayAdaptado" {
  package "Contratos" {
    [ICompositionRoot]
    [IGameObjectFactory]
    [IExplosionFactory]
    [IParticulaFactory]
    [IGranadaFactory]
    [IAudioService]
  }

  package "Servicios" {
    [AudioService_Mono]
    [SimpleAudioService]
    [AudioSourceManager]
    [AudioSettingsRepository]
    [CoroutineRunner]
  }

  package "Fabricas" {
    [DefaultGameObjectFactory]
    [DefaultExplosionFactory]
    [DefaultParticulaFactory]
    [DefaultGranadaFactory]
  }

  package "Gameplay" {
    [PersonajeRefactor]
    [ZombiesRefactor]
    [GranadaRefactor]
    [SettingsMenuAdaptado]
  }

  package "Persistencia" {
    [infoPartidaGuardada]
    [AudioSettingsRepository]
  }
}

' Dependencies between packages
[personaje] --> [DefaultGameObjectFactory]
[personaje] --> [AudioService]
[personaje] --> [infoPartidaGuardada]
[zombies] --> [DefaultGameObjectFactory]
[Granada] --> [DefaultGameObjectFactory]
[SettingsMenuAdaptado] --> [AudioService]

' Service dependencies
[AudioService] --> [AudioSourceManager]
[AudioService] --> [AudioSettingsRepository]
[DefaultAudioComponentFactory] --> [AudioSourceManager]
[DefaultAudioComponentFactory] --> [AudioSettingsRepository]
[DefaultGameObjectFactory] --> [DefaultExplosionFactory]
[DefaultGameObjectFactory] --> [DefaultParticulaFactory]
[DefaultGameObjectFactory] --> [DefaultGranadaFactory]

' Legacy references
[personaje] ..> [ExplosionFactory]
[personaje] ..> [ParticulaFactory]
[personaje] ..> [GranadaFactory]

@enduml